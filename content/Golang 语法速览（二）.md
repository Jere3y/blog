title: Golang 语法速览（二）
date: 2020-02-24 18:14:01
tags: Golang 语法
Category: Golang

## 数组

数组是最基本的数据结构。在 Go 中：

    var a [10]int

表示变量 a 是长度为 10 的 int 数组。

声明数据的时候必须要指定数组的长度，长度一旦确定，就不能改变。如果不指定长度，[]T 这声明的是“**切片**”。

### 切片

切片是数组的一部分，大部分现代语言都提供切片。

Go 的切片语法是 [1:2]

用方括号 [:] 中间使用 : 分割，前后数字分别表示开始（包括）和结束（不包括）的索引。

    package main

    import "fmt"

    func main() {
        var a = [3]int{1, 2, 3}
        var b = a[0:]
        var c = a[1:2]
        fmt.Println(a)
        fmt.Println(b)
        fmt.Println(c)
    }

输出结果为：

    [1 2 3]
    [1 2 3]
    [2]

: 冒号前面的值，默认是 0，后面的值默认是数组的最大长度。

### 切片就是数组的引用

产生切片没有复制一份新的数据，而是保存了数组的引用。

更改切片的值，同时会更改数组的值。

## 指针

Go 提供了指针.指针就是存储变量的地址。

    var p *int

声明 p 是一个指向 int 类型的指针。

我们可以这样对 p 进行赋值。

    i := 42
    p = &i

其中符号 & 表示提取变量 i 的地址。p 就是指向变量 i 的指针。我们可以通过 p 改变 i 的值。

    *p = 14

设置后的 i 的值为 14。

## 结构体（Structs）

结构体是延用了 C++ 的翻译，如果有不恰当，就直接使用英文。

像 C++ 一样，Go 提供 Structs。

Go 的设计思想，和 Java 这种面向对象语言不同的就是，将类的 field 和方法分开。

Structs 就可以看作类的 field。我们这样定义一个 field：

    type Person struct {
        age int
        sex int
    }

### 构造器

Go 会默认提供一个“构造器”来创建结构体。

    Person{12,1}
    Person{age:12}
    Person{sex:1}
    Psrson{age:12,sex:1}
    Person{}

需要注意的是，生成一个结构体，使用的不是圆括号()。而是大括号{}。

第一种创建结构体的方法，参数的顺序按照我们定义结构体声明的顺序。

我们还可以使用类似 json 语句的方式。来指定某个 field 的值。

我们甚至不指定任何 field 的值。Go 会将没有值的变量默认为相应的“零值”。

**小括号()是调用方法的传参，{}是生成新的结构体。**

### 访问结构体的 field

和大多数 C 系语言一样，Go 使用 . 来访问属性。

    p := Person{12,1}
    p.age

我们使用 . 来访问结构体的 age 属性。

### 指向结构体的指针

我们可以声明一个结构体的指针。用指针来访问结构体的属性。

    p := Person{12,1}
    pp := &p
    pp.age

正常的写法是 (*pp).age，但是这样太麻烦了，Go 允许我们缩写为 pp.age

## 未完待续
Title: Python 函数的参数详解
Date: 2019-10-12 21:23:48
Category: Python
Tags: Python 参数,参数默认值,关键字参数

## Python 函数中的参数类型

定义 Python 函数时，可以指定函数中的参数传入类型

1. 只能按照位置传入的参数（Python3.8 新增内容）
2. 只能根据关键字传入的参数
3. 可以 1，也可以 2。既可以按照位置传入的、也可以根据关键字传入的参数
4. 接受余下所有位置参数的参数
5. 接收余下所有关键字参数的参数

## 简单的 Python 函数定义

我们都知道，可以使用关键字 def 来定义一个函数：

    def fun(a,b,c):
        print(f"{a=}")
        print(f"{b=}")
        print(f"{c=}")


### 使用位置参数调用函数

在调用上面的函数时，使用：

    fun(1,2,3)

程序运行时，会按照位置，将参数 a,b,c 的值分别赋值成为 1,2,3，屏幕上会输出内容：

    a=1
    b=2
    c=3

这种根据位置确定的参数是位置参数。

### 使用关键字参数调用函数

让我们使用关键字参数调用上面的函数：

    fun(a=1,b=2,c=3)

会得到上面一样的结果。输出：

    a=1
    b=2
    c=3

随便调换参数的位置，像以下这样的调用方式也是合法的：

    fun(b=1,a=2,c=3)

控制台输出：

    a=2
    b=1
    c=3

说明程序根据参数的名称，来区分函数的值，这个时候不需要关心参数的位置。

我们还可以这样用：

    fun(1,b=2,c=3)

输出：

    a=1
    b=2
    c=3

注意，以下的调用是不合法的：

    fun(b=1,a=2,3)

控制台会输出：

    SyntaxError: positional argument follows keyword argument

Python 的语法**不允许关键字参数使用在位置参数前**。

思考下，这是为什么呢？这是很合理的设计，比如，如果这样调用函数：

    fun(b=1,2,3)

因为程序此时不能知道后面的 2,3 到底时赋值给谁的。

## 特殊的参数

在上面的函数定义中：

    def fun(a,b,c):
        print(f"{a=}")
        print(f"{b=}")
        print(f"{c=}")

函数 fun 的参数 a,b,c 既可以使用位置参数来调用，也可以使用关键字参数来调用。

不过，有的时候，需要限定函数参数的类型。

比如，某些参数的名称没有意义，则可以指定该参数只能是位置参数。

比如，不希望函数调用者关心传入参数的顺序，则指定参数类型位只能是关键字参数。

## 指定函数参数的类型

我们可以在定义函数的时候，就指定函数参数的类型。

一个函数的定义是这样的,注意函数参数的位置：

    def fun(pos1, pos2, /, pos_or_kwd, *, kwd1, kwd2):
            -----------    ----------     ----------
            |              |                  |
            |              咋传都行            |
            |                                  - 只能根据关键字传入的参数
            -- 只能按照指定位置传入的参数

在函数定义时，在 **/ 之前**的参数都是限制位置的参数。* 后面的参数都是只限制关键字的参数。看下面的函数：

    # 不限制的参数类型
    def standard_arg(arg):
        print(arg)

    # arg 是限制位置的
    def pos_only_arg(arg, /):
        print(arg)

    # arg 是必须使用关键字的
    def kwd_only_arg(*, arg):
        print(arg)

    # 三种参数类型都有了
    def combined_example(pos_only, /, standard, *, kwd_only):
        print(pos_only, standard, kwd_only)

## 接受余下所有位置参数的参数

在定义函数的时候，我们使用 * 在参数名称前面，表示**该参数接受余下所有的位置参数。**

例如：

    def accpet_all_pos_arg(a, b, *args):
        print(f'{a=}')
        print(f'{b=}')
        for arg in args:
            print(arg)

    
    accpet_all_pos_arg(1,2,3,4,5,6,7)

控制台输出：

    a=1
    b=2
    3
    4
    5
    6
    7

其中参数 *args 接受了从第 3 位开始后的所有参数。

*args 参数**后面的参数必须是关键字参数**。系统才能知道参数是如何传值的。

### 解包

定义 *args 时，可以接受余下所有的位置参数，我们可以使用 * 符号解包，传入一个元组(或者数组)。像这样：

    t = (4,5,6,7)
    # t = [4,5,6,7]
    accpet_all_pos_arg(1,2,*t)

输出：

    a=1
    b=2
    4
    5
    6
    7

符号 * 自动将元组（或者数组）解包成为相应的位置参数。

#### 解包的其他用法

我们可以使用解包符号 * 给元组（或者数组）进行切片，然后进行赋值：

    t = (4,5,6,7)
    a,b,*c = t

    print(f'{a=}')
    print(f'{b=}')
    print(f'{c=}')

输出结果：

    a=4
    b=5
    c=[6, 7]

我们使用 *c 将数组的其余的元素都赋值给了 c。

甚至还可以对字符串进行这种骚操作：

    t = 'hello'
    a, b, *c = t
    print(f'{a=}')
    print(f'{b=}')
    print(f'{c=}')

输出结果：

    a='h'
    b='e'
    c=['l', 'l', 'o']

## 接收余下所有关键字参数的参数

同 *arg 一样的道理，我们在参数名字之前加上 ** 表示余下所有关键字参数的参数。

    def accpet_all_kwag_arg(a, b, **kwags):
        print(f'{a=}')
        print(f'{b=}')
        print(kwags)
        for kwag in kwags:
            print(kwag, '-', kwags[kwag])


    accpet_all_kwag_arg(1, 2, c=3, d=4)

输出内容：

    a=1
    b=2
    {'c': 3, 'd': 4}
    c - 3
    d - 4

参数 **kwags 接受了所有余下的关键字参数。并且以字典（dict）的形式存储在 kwags 中。

我们同样可以用 ** 解包，来传入一个字典到函数中。例如上面的函数我们也可以这样调用：

    kwags = {'c': 3, 'd': 4}
    accpet_all_kwag_arg(1, 2, **kwags)

会输出和上面一样的结果。

## 参考

1. [Python docs](https://docs.python.org/3.8/)